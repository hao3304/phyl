{
    "version": 3,
    "sources": [
        "../../../src/home/controller/api.js"
    ],
    "names": [],
    "mappings": "AAAA;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;;;;;;;;;;;;;;;mBAQQ,Q;;UACA,Q;;;;;;qBAAiB,KAAK,OAAL,CAAa,UAAb,C;;;AAAjB,sB;;mBACD,MAAM,OAAN,CAAc,QAAd,C;;;;;+CACM,KAAK,IAAL,CAAU,MAAV,C;;;;;;;;;;;;;;;;;;;;;;mBAOL,Y;;;;;;;;AACJ,kBAAG,KAAK,MAAL,EAAH,EAAiB;AAAA;AACf,sBAAI,OAAO,OAAK,IAAL,CAAU,MAAV,CAAX;AACA,sBAAI,aAAJ;AACA,qBAAG,QAAH,CAAY,KAAK,IAAjB,EAAuB,UAAU,GAAV,EAAc,IAAd,EAAoB;AACzC,wBAAI,OAAO,MAAM,WAAjB;AACA,wBAAI,WAAW,KAAK,EAAL,GAAU,OAAV,CAAkB,IAAlB,EAAuB,EAAvB,IAA2B,GAA3B,GAAgC,KAAK,gBAAL,CAAsB,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAA/C;AACA,wBAAI,CAAC,GAAG,UAAH,CAAc,IAAd,CAAL,EAA0B;AACxB,yBAAG,SAAH,CAAa,IAAb;AACD;AACD,uBAAG,SAAH,CAAa,OAAK,GAAL,GAAS,QAAtB,EAAgC,IAAhC,EAAsC,UAAU,GAAV,EAAe;AACnD,0BAAG,GAAH,EAAO;AACL,+BAAO,KAAK,IAAL,CAAU,OAAV,CAAP;AACD;AACD,2BAAK,OAAL,CAAa,EAAC,MAAK,QAAN,EAAb;AACD,qBALD;AAMD,mBAZD;AAHe;AAgBhB;;;;;;;;;;;;;;;;;;;;;;;mBAQG,U;;UAEE,I,EAEE,K,EACA,I;;;;;mBAJL,KAAK,KAAL,E;;;;;;qBACgB,KAAK,OAAL,CAAa,UAAb,C;;;AAAb,kB;;kBACA,MAAM,OAAN,CAAc,IAAd,C;;;;;;qBACgB,KAAK,KAAL,CAAW,KAAK,IAAhB,C;;;AAAd,mB;;qBACa,MAAM,KAAN,CAAY,EAAC,QAAO,KAAK,MAAb,EAAZ,EAAkC,IAAlC,E;;;AAAb,kB;gDACG,KAAK,OAAL,CAAa,IAAb,C;;;gDAGA,KAAK,IAAL,CAAU,MAAV,C",
    "file": "../../../src/home/controller/api.js",
    "sourcesContent": [
        "'use strict';\n\nimport Base from './base.js';\nlet fs = require(\"fs\");\nlet uuid = require(\"uuid\");\n\nexport default class extends Base {\n\n  /**\n   * before magic method\n   * @return {Promise} []\n   */\n  async __before(){\n    let userinfo = await this.session(\"userinfo\");\n    if(think.isEmpty(userinfo)){\n      return this.fail(\"没有权限\");\n    }\n  }\n\n  /**\n   * 上传和获取图片\n   */\n  async uploadAction(){\n    if(this.isPost()){\n      let file = this.file(\"file\");\n      let self = this;\n      fs.readFile(file.path, function (err,data) {\n        let path = think.UPLOAD_PATH;\n        let filename = uuid.v1().replace(/-/g,\"\")+\".\"+ file.originalFilename.split(\".\")[1];\n        if (!fs.existsSync(path)) {\n          fs.mkdirSync(path);\n        }\n        fs.writeFile(path+\"/\"+filename ,data, function (err) {\n          if(err){\n            return self.fail(\"上传失败!\");\n          }\n          self.success({name:filename})\n        })\n      })\n    }\n  }\n\n\n  /**\n   * 获取个人信息\n   * @returns {void|PreventPromise|Promise|*}\n   */\n  async mineAction(){\n    if(this.isGet()){\n      let info = await this.session(\"userinfo\");\n      if(!think.isEmpty(info)){\n        let Model = await this.model(info.type);\n        let user = await Model.where({userid:info.userid}).find();\n        return this.success(user);\n\n      }else{\n        return this.fail(\"没有权限\");\n      }\n    }\n  }\n}"
    ]
}